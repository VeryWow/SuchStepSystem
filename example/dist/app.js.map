{"version":3,"sources":["node_modules/browserify/node_modules/browser-pack/_prelude.js","classes/Step.js","classes/StepSystem.js","example/app.js"],"names":[],"mappings":"AAAA;;;;;;;;;;;ICAa,I,WAAA,I;AACX,gBAAa,MAAb,EAAqB;AAAA;;AACnB,SAAK,MAAL,GAAc,OAAO,MAAP,IAAiB,IAA/B;AACA,SAAK,IAAL,GAAY,OAAO,IAAnB;AACA,SAAK,IAAL,GAAY,OAAO,IAAnB;AACA,SAAK,OAAL,GAAe,OAAO,OAAP,IAAkB,EAAjC;AACA,SAAK,QAAL,GAAgB,OAAO,QAAP,IAAmB,EAAnC;AACA,SAAK,IAAL,GAAY,IAAZ;AACA,SAAK,KAAL,GAAa,EAAb;AACA,SAAK,YAAL,GAAoB;AAClB,oBAAc,OAAO,YAAP,CAAoB,YAApB,IAAoC,KAAK,OAAL,CAAa,YAAjD,IAAiE,YAAY;AACzF,eAAO,EAAC,QAAQ,IAAT,EAAP;AACD,OAHiB;AAIlB,kBAAY,OAAO,YAAP,CAAoB,UAApB,IAAkC,KAAK,OAAL,CAAa,UAA/C,IAA6D,YAAY;AACnF,eAAO,EAAC,QAAQ,IAAT,EAAP;AACD,OANiB;AAOlB,kBAAY,OAAO,YAAP,CAAoB,UAApB,IAAkC,KAAK,OAAL,CAAa,UAA/C,IAA6D,YAAY;AACnF,eAAO,EAAC,QAAQ,IAAT,EAAP;AACD;AATiB,KAApB;AAWD;;AAED;;;;;wBACc;AAAE,aAAO,KAAK,MAAL,CAAY,MAAnB;AAA2B;;;wBAC7B;AAAE,aAAO,KAAK,MAAL,CAAY,MAAnB;AAA2B;;;wBAC3B;AAAE,aAAO,KAAK,MAAL,CAAY,QAAnB;AAA6B;;;wBAEnC;AACV,aAAO,KAAK,KAAZ;AACD;;;;;;;;;;;;;;;;;AC7BH;;;;;;;;;IASa,U,WAAA,U;AACX;;;AAGA,sBAAa,SAAb,EAAwB;AAAA;;AACtB,SAAK,MAAL,GAAc,EAAd;AACA,SAAK,aAAL,GAAqB,IAArB;AACA,SAAK,UAAL,GAAkB,SAAlB;AACA,SAAK,cAAL,GAAsB,YAAY,CAAE,CAApC;AACD;;AAED;;;;;;;;4BAIS,I,EAAM;AACb,WAAK,MAAL,GAAc,IAAd;AACA,WAAK,MAAL,CAAY,IAAZ,CAAiB,IAAjB;AACA,aAAO,IAAP;AACD;;;gCAEY,E,EAAI;AACf,WAAK,cAAL,GAAsB,EAAtB;AACA,aAAO,IAAP;AACD;;;yBAMK,I,EAAM;AACV,aAAO,KAAK,MAAL,CAAY,IAAZ,CAAP;AACD;;;2BAUO,I,EAAM;AACZ,UAAI,MAAM,KAAK,YAAL,CAAkB,YAAlB,EAAV;AACA,UAAI,CAAC,IAAI,MAAT,EAAiB;AACf,YAAI,IAAI,OAAR,EAAiB,IAAI,OAAJ;AACjB,eAAO,IAAP;AACD;AACD,WAAK,SAAL,CAAe,IAAf,CAAoB,KAAK,QAAzB;AACD;;;6BAES;AACR,UAAI,MAAM,KAAK,YAAL,CAAkB,UAAlB,EAAV;AACA,UAAI,CAAC,IAAI,MAAT,EAAiB;AACf,YAAI,IAAI,OAAR,EAAiB,IAAI,OAAJ;AACjB,eAAO,IAAP;AACD;AACD,UAAI,YAAY,KAAK,YAAL,IAAqB,EAArC;AACA,UAAI,YAAY,UAAU,IAAV,IAAkB,IAAlC;AACA,UAAI,SAAJ,EAAe;AACb,aAAK,QAAL,CAAc,KAAK,IAAL,CAAU,SAAV,CAAd;AACD;AACF;;;6BAES;AACR,UAAI,MAAM,KAAK,YAAL,CAAkB,UAAlB,EAAV;AACA,UAAI,CAAC,IAAI,MAAT,EAAiB;AACf,YAAI,IAAI,OAAR,EAAiB,IAAI,OAAJ;AACjB,eAAO,IAAP;AACD;AACD,UAAI,YAAY,KAAK,YAAL,IAAqB,EAArC;AACA,UAAI,YAAY,UAAU,IAAV,IAAkB,IAAlC;AACA,UAAI,SAAJ,EAAe;AACb,aAAK,QAAL,CAAc,KAAK,IAAL,CAAU,SAAV,CAAd;AACD;AACF;;;6BAES,I,EAAM;AACd,UAAI,YAAY,KAAK,YAAL,IAAqB,EAArC;AACA,WAAK,IAAL,GAAY,UAAU,IAAV,IAAkB,IAA9B;AACA,WAAK,MAAL,CAAY,IAAZ;AACD;;;2BAEO;AACN,WAAK,cAAL;AACD;;;wBA3DmB;AAClB,aAAO,KAAK,KAAL,CAAW,KAAK,aAAhB,KAAkC,IAAzC;AACD;;;wBAMgB;AACf,aAAO,KAAK,UAAZ;AACD;;;wBAEY;AACX,aAAO,KAAK,MAAZ;AACD;;;;;;;;;ACjDH;;AACA;;AAEA,OAAO,GAAP,GAAa,4BAAb;;AAEA,CAAC,UAAU,CAAV,EAAa,GAAb,EAAkB;AACjB,UAAQ,GAAR,CAAY,GAAZ;AACD,CAFD,EAEG,MAFH,EAEW,OAAO,GAFlB","file":"app.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","export class Step {\n  constructor (params) {\n    this.parent = params.parent || null\n    this.name = params.name\n    this.next = params.next\n    this.methods = params.methods || {}\n    this.template = params.template || ''\n    this.from = null\n    this._data = {}\n    this.interceptors = {\n      beforeRender: params.interceptors.beforeRender || this.methods.beforeRender || function () {\n        return {status: true}\n      },\n      beforeNext: params.interceptors.beforeNext || this.methods.beforeNext || function () {\n        return {status: true}\n      },\n      beforeBack: params.interceptors.beforeBack || this.methods.beforeBack || function () {\n        return {status: true}\n      }\n    }\n  }\n\n  /* LINKS */\n  get goNext () { return this.parent.goNext }\n  get goBack () { return this.parent.goBack }\n  get goToStep () { return this.parent.goToStep }\n\n  get data () {\n    return this._data\n  }\n}\n","/**\n * StepSystem v1.0.0\n * Last update: 15.05.2017\n *\n * Dependencies: jQuery\n *\n * @author kaskar2008\n */\n\nexport class StepSystem {\n  /**\n   * @param  {jQuery element} container\n   */\n  constructor (container) {\n    this._steps = {}\n    this._current_step = null\n    this._container = container\n    this.commonHandlers = function () {}\n  }\n\n  /**\n   * Add new step\n   * @param {Step} step\n   */\n  addStep (step) {\n    step.parent = this\n    this._steps.push(step)\n    return this\n  }\n\n  setHandlers (cb) {\n    this.commonHandlers = cb\n    return this\n  }\n\n  get current_step () {\n    return this.steps[this._current_step] || null\n  }\n\n  step (name) {\n    return this._steps[name]\n  }\n\n  get container () {\n    return this._container\n  }\n\n  get steps () {\n    return this._steps\n  }\n\n  render (step) {\n    let _br = step.interceptors.beforeRender()\n    if (!_br.status) {\n      if (_br.onError) _br.onError()\n      return this\n    }\n    this.container.html(step.template)\n  }\n\n  goNext () {\n    let _bn = step.interceptors.beforeNext()\n    if (!_bn.status) {\n      if (_bn.onError) _bn.onError()\n      return this\n    }\n    let curr_step = this.current_step || {}\n    let next_step = curr_step.next || null\n    if (next_step) {\n      this.goToStep(this.step(next_step))\n    }\n  }\n\n  goBack () {\n    let _bb = step.interceptors.beforeBack()\n    if (!_bb.status) {\n      if (_bb.onError) _bb.onError()\n      return this\n    }\n    let curr_step = this.current_step || {}\n    let prev_step = curr_step.from || null\n    if (prev_step) {\n      this.goToStep(this.step(prev_step))\n    }\n  }\n\n  goToStep (step) {\n    let curr_step = this.current_step || {}\n    step.from = curr_step.name || null\n    this.render(step)\n  }\n\n  init () {\n    this.commonHandlers()\n  }\n}\n","import { Step } from '../classes/Step'\nimport { StepSystem } from '../classes/StepSystem'\n\nwindow.app = new StepSystem();\n\n(function ($, app) {\n  console.log(app)\n})(jQuery, window.app)\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJjbGFzc2VzL1N0ZXAuanMiLCJjbGFzc2VzL1N0ZXBTeXN0ZW0uanMiLCJleGFtcGxlL2FwcC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7Ozs7Ozs7Ozs7SUNBYSxJLFdBQUEsSTtBQUNYLGdCQUFhLE1BQWIsRUFBcUI7QUFBQTs7QUFDbkIsU0FBSyxNQUFMLEdBQWMsT0FBTyxNQUFQLElBQWlCLElBQS9CO0FBQ0EsU0FBSyxJQUFMLEdBQVksT0FBTyxJQUFuQjtBQUNBLFNBQUssSUFBTCxHQUFZLE9BQU8sSUFBbkI7QUFDQSxTQUFLLE9BQUwsR0FBZSxPQUFPLE9BQVAsSUFBa0IsRUFBakM7QUFDQSxTQUFLLFFBQUwsR0FBZ0IsT0FBTyxRQUFQLElBQW1CLEVBQW5DO0FBQ0EsU0FBSyxJQUFMLEdBQVksSUFBWjtBQUNBLFNBQUssS0FBTCxHQUFhLEVBQWI7QUFDQSxTQUFLLFlBQUwsR0FBb0I7QUFDbEIsb0JBQWMsT0FBTyxZQUFQLENBQW9CLFlBQXBCLElBQW9DLEtBQUssT0FBTCxDQUFhLFlBQWpELElBQWlFLFlBQVk7QUFDekYsZUFBTyxFQUFDLFFBQVEsSUFBVCxFQUFQO0FBQ0QsT0FIaUI7QUFJbEIsa0JBQVksT0FBTyxZQUFQLENBQW9CLFVBQXBCLElBQWtDLEtBQUssT0FBTCxDQUFhLFVBQS9DLElBQTZELFlBQVk7QUFDbkYsZUFBTyxFQUFDLFFBQVEsSUFBVCxFQUFQO0FBQ0QsT0FOaUI7QUFPbEIsa0JBQVksT0FBTyxZQUFQLENBQW9CLFVBQXBCLElBQWtDLEtBQUssT0FBTCxDQUFhLFVBQS9DLElBQTZELFlBQVk7QUFDbkYsZUFBTyxFQUFDLFFBQVEsSUFBVCxFQUFQO0FBQ0Q7QUFUaUIsS0FBcEI7QUFXRDs7QUFFRDs7Ozs7d0JBQ2M7QUFBRSxhQUFPLEtBQUssTUFBTCxDQUFZLE1BQW5CO0FBQTJCOzs7d0JB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KGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJleHBvcnQgY2xhc3MgU3RlcCB7XG4gIGNvbnN0cnVjdG9yIChwYXJhbXMpIHtcbiAgICB0aGlzLnBhcmVudCA9IHBhcmFtcy5wYXJlbnQgfHwgbnVsbFxuICAgIHRoaXMubmFtZSA9IHBhcmFtcy5uYW1lXG4gICAgdGhpcy5uZXh0ID0gcGFyYW1zLm5leHRcbiAgICB0aGlzLm1ldGhvZHMgPSBwYXJhbXMubWV0aG9kcyB8fCB7fVxuICAgIHRoaXMudGVtcGxhdGUgPSBwYXJhbXMudGVtcGxhdGUgfHwgJydcbiAgICB0aGlzLmZyb20gPSBudWxsXG4gICAgdGhpcy5fZGF0YSA9IHt9XG4gICAgdGhpcy5pbnRlcmNlcHRvcnMgPSB7XG4gICAgICBiZWZvcmVSZW5kZXI6IHBhcmFtcy5pbnRlcmNlcHRvcnMuYmVmb3JlUmVuZGVyIHx8IHRoaXMubWV0aG9kcy5iZWZvcmVSZW5kZXIgfHwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge3N0YXR1czogdHJ1ZX1cbiAgICAgIH0sXG4gICAgICBiZWZvcmVOZXh0OiBwYXJhbXMuaW50ZXJjZXB0b3JzLmJlZm9yZU5leHQgfHwgdGhpcy5tZXRob2RzLmJlZm9yZU5leHQgfHwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge3N0YXR1czogdHJ1ZX1cbiAgICAgIH0sXG4gICAgICBiZWZvcmVCYWNrOiBwYXJhbXMuaW50ZXJjZXB0b3JzLmJlZm9yZUJhY2sgfHwgdGhpcy5tZXRob2RzLmJlZm9yZUJhY2sgfHwgZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4ge3N0YXR1czogdHJ1ZX1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKiBMSU5LUyAqL1xuICBnZXQgZ29OZXh0ICgpIHsgcmV0dXJuIHRoaXMucGFyZW50LmdvTmV4dCB9XG4gIGdldCBnb0JhY2sgKCkgeyByZXR1cm4gdGhpcy5wYXJlbnQuZ29CYWNrIH1cbiAgZ2V0IGdvVG9TdGVwICgpIHsgcmV0dXJuIHRoaXMucGFyZW50LmdvVG9TdGVwIH1cblxuICBnZXQgZGF0YSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGFcbiAgfVxufVxuIiwiLyoqXG4gKiBTdGVwU3lzdGVtIHYxLjAuMFxuICogTGFzdCB1cGRhdGU6IDE1LjA1LjIwMTdcbiAqXG4gKiBEZXBlbmRlbmNpZXM6IGpRdWVyeVxuICpcbiAqIEBhdXRob3Iga2Fza2FyMjAwOFxuICovXG5cbmV4cG9ydCBjbGFzcyBTdGVwU3lzdGVtIHtcbiAgLyoqXG4gICAqIEBwYXJhbSAge2pRdWVyeSBlbGVtZW50fSBjb250YWluZXJcbiAgICovXG4gIGNvbnN0cnVjdG9yIChjb250YWluZXIpIHtcbiAgICB0aGlzLl9zdGVwcyA9IHt9XG4gICAgdGhpcy5fY3VycmVudF9zdGVwID0gbnVsbFxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lclxuICAgIHRoaXMuY29tbW9uSGFuZGxlcnMgPSBmdW5jdGlvbiAoKSB7fVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBuZXcgc3RlcFxuICAgKiBAcGFyYW0ge1N0ZXB9IHN0ZXBcbiAgICovXG4gIGFkZFN0ZXAgKHN0ZXApIHtcbiAgICBzdGVwLnBhcmVudCA9IHRoaXNcbiAgICB0aGlzLl9zdGVwcy5wdXNoKHN0ZXApXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIHNldEhhbmRsZXJzIChjYikge1xuICAgIHRoaXMuY29tbW9uSGFuZGxlcnMgPSBjYlxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICBnZXQgY3VycmVudF9zdGVwICgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGVwc1t0aGlzLl9jdXJyZW50X3N0ZXBdIHx8IG51bGxcbiAgfVxuXG4gIHN0ZXAgKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5fc3RlcHNbbmFtZV1cbiAgfVxuXG4gIGdldCBjb250YWluZXIgKCkge1xuICAgIHJldHVybiB0aGlzLl9jb250YWluZXJcbiAgfVxuXG4gIGdldCBzdGVwcyAoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0ZXBzXG4gIH1cblxuICByZW5kZXIgKHN0ZXApIHtcbiAgICBsZXQgX2JyID0gc3RlcC5pbnRlcmNlcHRvcnMuYmVmb3JlUmVuZGVyKClcbiAgICBpZiAoIV9ici5zdGF0dXMpIHtcbiAgICAgIGlmIChfYnIub25FcnJvcikgX2JyLm9uRXJyb3IoKVxuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG4gICAgdGhpcy5jb250YWluZXIuaHRtbChzdGVwLnRlbXBsYXRlKVxuICB9XG5cbiAgZ29OZXh0ICgpIHtcbiAgICBsZXQgX2JuID0gc3RlcC5pbnRlcmNlcHRvcnMuYmVmb3JlTmV4dCgpXG4gICAgaWYgKCFfYm4uc3RhdHVzKSB7XG4gICAgICBpZiAoX2JuLm9uRXJyb3IpIF9ibi5vbkVycm9yKClcbiAgICAgIHJldHVybiB0aGlzXG4gICAgfVxuICAgIGxldCBjdXJyX3N0ZXAgPSB0aGlzLmN1cnJlbnRfc3RlcCB8fCB7fVxuICAgIGxldCBuZXh0X3N0ZXAgPSBjdXJyX3N0ZXAubmV4dCB8fCBudWxsXG4gICAgaWYgKG5leHRfc3RlcCkge1xuICAgICAgdGhpcy5nb1RvU3RlcCh0aGlzLnN0ZXAobmV4dF9zdGVwKSlcbiAgICB9XG4gIH1cblxuICBnb0JhY2sgKCkge1xuICAgIGxldCBfYmIgPSBzdGVwLmludGVyY2VwdG9ycy5iZWZvcmVCYWNrKClcbiAgICBpZiAoIV9iYi5zdGF0dXMpIHtcbiAgICAgIGlmIChfYmIub25FcnJvcikgX2JiLm9uRXJyb3IoKVxuICAgICAgcmV0dXJuIHRoaXNcbiAgICB9XG4gICAgbGV0IGN1cnJfc3RlcCA9IHRoaXMuY3VycmVudF9zdGVwIHx8IHt9XG4gICAgbGV0IHByZXZfc3RlcCA9IGN1cnJfc3RlcC5mcm9tIHx8IG51bGxcbiAgICBpZiAocHJldl9zdGVwKSB7XG4gICAgICB0aGlzLmdvVG9TdGVwKHRoaXMuc3RlcChwcmV2X3N0ZXApKVxuICAgIH1cbiAgfVxuXG4gIGdvVG9TdGVwIChzdGVwKSB7XG4gICAgbGV0IGN1cnJfc3RlcCA9IHRoaXMuY3VycmVudF9zdGVwIHx8IHt9XG4gICAgc3RlcC5mcm9tID0gY3Vycl9zdGVwLm5hbWUgfHwgbnVsbFxuICAgIHRoaXMucmVuZGVyKHN0ZXApXG4gIH1cblxuICBpbml0ICgpIHtcbiAgICB0aGlzLmNvbW1vbkhhbmRsZXJzKClcbiAgfVxufVxuIiwiaW1wb3J0IHsgU3RlcCB9IGZyb20gJy4uL2NsYXNzZXMvU3RlcCdcbmltcG9ydCB7IFN0ZXBTeXN0ZW0gfSBmcm9tICcuLi9jbGFzc2VzL1N0ZXBTeXN0ZW0nXG5cbndpbmRvdy5hcHAgPSBuZXcgU3RlcFN5c3RlbSgpO1xuXG4oZnVuY3Rpb24gKCQsIGFwcCkge1xuICBjb25zb2xlLmxvZyhhcHApXG59KShqUXVlcnksIHdpbmRvdy5hcHApXG4iXX0="}